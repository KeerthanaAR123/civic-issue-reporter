<div class="min-h-screen bg-gray-50 p-6 pb-24 pt-28">
  <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <div class="bg-white p-4 rounded-xl shadow-md h-auto flex flex-col">
      <h3 class="text-lg font-bold text-gray-700 mb-3 flex items-center gap-2">
        <span class="text-green-500">üìç</span> Select Issue Location
      </h3>
      
      <div class="flex-1 rounded-xl relative overflow-hidden border border-gray-200 min-h-[500px]" id="map">
      </div>
      
      <button type="button" (click)="locateUser()" class="mt-3 w-full bg-blue-500 text-white font-bold py-2.5 rounded-lg hover:bg-blue-600 transition flex items-center justify-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
        Use My Current Location
      </button>
    </div>

    <div class="bg-white p-8 rounded-xl shadow-md">
      <h2 class="text-2xl font-bold text-primary mb-6">Report New Issue</h2>
      
      <form [formGroup]="reportForm" (ngSubmit)="onSubmit()">
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Issue Title *</label>
          <input formControlName="title" type="text" class="w-full border border-gray-300 rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary/20 transition" placeholder="e.g. Broken Streetlight">
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">Issue Type *</label>
          <div class="space-y-2">
             <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-primary/5">
               <input type="radio" formControlName="category" value="Road Infrastructure" class="text-primary focus:ring-primary">
               <span class="ml-3 text-sm text-gray-700 font-medium">Road Infrastructure</span>
             </label>
             <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-primary/5">
               <input type="radio" formControlName="category" value="Waste Management" class="text-primary focus:ring-primary">
               <span class="ml-3 text-sm text-gray-700 font-medium">Waste Management</span>
             </label>
             <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-primary/5">
               <input type="radio" formControlName="category" value="Public Safety" class="text-primary focus:ring-primary">
               <span class="ml-3 text-sm text-gray-700 font-medium">Public Safety</span>
             </label>
             <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-primary/5">
               <input type="radio" formControlName="category" value="Water Supply" class="text-primary focus:ring-primary">
               <span class="ml-3 text-sm text-gray-700 font-medium">Water Supply</span>
             </label>
             <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 has-[:checked]:border-primary has-[:checked]:bg-primary/5">
               <input type="radio" formControlName="category" value="Other" class="text-primary focus:ring-primary">
               <span class="ml-3 text-sm text-gray-700 font-medium">Other</span>
             </label>
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Location Address *</label>
          <input formControlName="address" type="text" class="w-full border border-gray-300 rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary/20" placeholder="Enter location manually or use map">
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
          <textarea formControlName="description" rows="4" class="w-full border border-gray-300 rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary/20" placeholder="Describe the issue in detail..."></textarea>
        </div>

        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2">Upload Evidence (Optional)</label>
          <input type="file" (change)="onFileSelected($event)" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2.5 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20 cursor-pointer"/>
          <p *ngIf="selectedFile" class="text-xs text-green-600 mt-2">üì∏ {{ selectedFile.name }} selected</p>
        </div>

        <button type="submit" [disabled]="isSubmitting || reportForm.invalid" class="w-full bg-primary text-white font-bold py-3.5 rounded-lg hover:bg-teal-800 transition shadow-lg disabled:opacity-50 flex justify-center items-center gap-2">
          <span *ngIf="!isSubmitting">‚úì Submit Report</span>
          <span *ngIf="isSubmitting">Uploading...</span>
        </button>
      </form>
    </div>
  </div>
</div>
